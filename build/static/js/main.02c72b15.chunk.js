(this["webpackJsonpomdb-search"]=this["webpackJsonpomdb-search"]||[]).push([[0],[,,,,,,function(e,a,t){},,function(e,a,t){e.exports=t.p+"static/media/noImage.e99c211b.png"},function(e,a,t){e.exports=t.p+"static/media/loading.68abfa64.svg"},,function(e,a,t){e.exports=t(23)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(7),o=t.n(c),s=(t(16),t(17),t(18),t(19),function(){return r.a.createElement("h1",{className:"title"},r.a.createElement("span",{className:"OMDb"},"OMDb"),r.a.createElement("span",{className:"Search"},"Search"))}),l=(t(20),t(10)),i={searchValue:"",response:{loading:!1,error:!1},cache:{},filters:{year:2020},movies:[]},u=t(1),m=t(3),p=function(e,a,t,n){return{movies:e,searchValue:a,cache:Object(u.a)(Object(u.a)({},t),{},Object(m.a)({},a,e)),response:n}},d=function(e,a){var t=e.find((function(e){return e.Poster===a}));return t&&(t.Poster="N/A"),{movies:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0,t=i;switch(a.type){case"SUBMIT_SEARCH":t=p(a.payload.movies,a.payload.searchValue,a.payload.cache,a.payload.response);break;case"REPLACE_MISSING_IMAGES":t=d(a.payload.movies,a.payload.posterUrl);break;default:t=i}return Object(u.a)(Object(u.a)({},e),t)},h=t(2),b=t.n(h),v=t(4),E="https://www.omdbapi.com/?apikey=".concat("13b4bd07"),g=function(e){return"".concat(E,"&s=").concat(e)},y=function(e){return e.trim().replace(/\s+/g,"+").toLowerCase()},S=function(e,a,t,n){e({type:"SUBMIT_SEARCH",payload:{movies:a[t],searchValue:t,cache:a,response:Object(u.a)(Object(u.a)({},n),{},{loading:!1})}})},I=function(e,a,t,n){e({type:"SUBMIT_SEARCH",payload:{movies:n,searchValue:t,cache:a,response:{error:!1,loading:!1}}})},x=function(e,a,t){e({type:"SUBMIT_SEARCH",payload:{movies:[],searchValue:t,cache:a,response:{error:!0,loading:!1}}})},O=function(e,a,t){e({type:"SUBMIT_SEARCH",payload:{movies:[],searchValue:t,cache:a,response:{error:!1,loading:!0}}})},j=function(e){return function(){var a=Object(v.a)(b.a.mark((function a(t){var n,r,c,o,s,l,i,u,m,p,d;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("TRIGGER_ACTION"!==t.type){a.next=31;break}if(n=t.payload,r=n.searchValue,c=n.cache,o=n.response,s=y(r),l=g(s),O(e,c,s),!(s in c)){a.next=9;break}S(e,c,s,o),a.next=29;break;case 9:return a.prev=9,a.next=12,fetch(l);case 12:return i=a.sent,a.next=15,i.json();case 15:return u=a.sent,m=u.Search.map(function(){var e=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((t=a.imdbID,"".concat(E,"&i=").concat(t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var t}),e)})));return function(a){return e.apply(this,arguments)}}()),a.next=19,Promise.all(m);case 19:return p=a.sent,a.next=22,Promise.all(p.map(function(){var e=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 22:d=a.sent,I(e,c,s,d),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(9),x(e,c,s);case 29:a.next=32;break;case 31:e(t);case 32:case"end":return a.stop()}}),a,null,[[9,26]])})));return function(e){return a.apply(this,arguments)}}()},N=Object(n.createContext)(),k=function(e){var a=e.children,t=Object(n.useReducer)(f,i),c=Object(l.a)(t,2),o=c[0],s=c[1],u=j(s),m=function(e,a){return{replaceMissingImage:Object(n.useCallback)((function(t){a({type:"REPLACE_MISSING_IMAGES",payload:{movies:e.movies,posterUrl:t}})}),[a]),submitFilters:Object(n.useCallback)((function(e){a({type:"SUBMIT_FILTERS",payload:{movies:e}})}),[a]),submitSearch:Object(n.useCallback)((function(e,t,n,r){a({type:"TRIGGER_ACTION",payload:{movies:e,searchValue:t,cache:n,response:r}})}),[a])}}(o,u);return r.a.createElement(N.Provider,{value:{state:o,actions:m,enhancedDispatch:u}},a)},w=function(){var e=Object(n.useContext)(N),a=e.state,t=a.searchValue,c=a.cache,o=a.response,s=a.movies,l=e.actions,i=t;return r.a.createElement("form",{className:"searchBar hide-submit",onSubmit:function(e){e.preventDefault(),l.submitSearch(s,i,c,o)}},r.a.createElement("label",null,"Search OMDb's film database",r.a.createElement("input",{type:"search",placeholder:"Star Wars 2: Electric Boogaloo",onChange:function(e){return i=e.target.value},disabled:o.loading?"disabled":null})),r.a.createElement("input",{type:"submit",value:"Submit"}))},C=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(s,null),r.a.createElement(w,null))},R=(t(6),t(8)),M=t.n(R),A=function(e){var a=e.movie,t=e.actions,n="N/A"===a.Poster?M.a:a.Poster,c="N/A"===a.Poster?"Missing poster for ".concat(a.Title):"Poster for ".concat(a.Title),o="".concat(a.Title,". Released ").concat(a.Year,", Rated ").concat(a.imdbRating," on IMDB");return r.a.createElement("div",{className:"card","aria-label":o,"aria-required":"true",tabIndex:"0"},r.a.createElement("img",{src:n,onError:function(){t.replaceMissingImage(n)},alt:c}),r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,a.Title),r.a.createElement("span",null,r.a.createElement("h2",{className:"label"},"Year:")," ",r.a.createElement("h2",{className:"data"},a.Year)),r.a.createElement("span",null,r.a.createElement("h2",{className:"label"},"Rating:")," ",r.a.createElement("h2",{className:"data"},a.imdbRating))))},T=function(){var e=Object(n.useContext)(N),a=e.state,t=a.movies,c=a.response.error,o=e.actions;if(t){if(t.length>0){var s=t.map((function(e,a){return r.a.createElement("li",{key:"".concat(e.imdbID,"-").concat(a)},r.a.createElement(A,{movie:e,actions:o}))}));return(r.a.createElement("ul",null,s))}if(c)return r.a.createElement("h2",null,"No results found :(")}return null},_=(t(22),t(9)),B=t.n(_),P=function(){var e=null;return Object(n.useContext)(N).state.response.loading&&(e=r.a.createElement("object",{type:"image/svg+xml",data:B.a},"svg-animation")),r.a.createElement("main",null,e,r.a.createElement(T,null))},V=r.a.memo((function(){return r.a.createElement("div",{className:"main"},r.a.createElement(C,null),r.a.createElement(P,null))}));V.displayName="App";var D=V;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.02c72b15.chunk.js.map